{% extends 'grades/base.html' %}
{% block title %}学生管理系统{% endblock %}
{% block content %}
<form id="inquire_form" action="{% url 'grades:inquire' %}" method="GET">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="查询" />
    </form>
    <div class="error_div"></div>
    <br>
    查询结果是<div class="success_div"></div> 
{% endblock %}
{% block footer %}
    <a href="{% url 'grades:details' %}">更多咨询</a>
    <br>
    <a href="{% url 'grades:manager' %}">管理成绩</a>
{% endblock %}
{% block javascript %}
    <script>
        $("#inquire_form").submit(function(event){
            $.ajax({
                type: $(this).attr('method'),
                url: $(this).attr('action'),
                data: $(this).serialize,
                success: function(json){
                    $('#success_div').append(json);
                    console.log("success");
                },
                error: function(e,x,r){
                    $('#error_div').html(e.status+":"+e.responseText);
                    console.log("error");
                }
            });
            event.preventDefault();           
        });
    </script>
{% endblock %}


